#include <gtest/gtest.h>
#include "../../../Aeu.h"

TEST(Unsigned_Subtraction, Basic) {
    Aeu128 zero = 0;
    Aeu128 m0 = 14377898;
    EXPECT_EQ(m0 - 0, 14377898);
    EXPECT_EQ(m0 + 0, 14377898);
    EXPECT_EQ(m0 + zero, 14377898);
    EXPECT_EQ(m0 - zero, 14377898);
    EXPECT_EQ(m0 + +zero, 14377898);
    EXPECT_EQ(m0 - +zero, 14377898);
    m0 -= 0; EXPECT_EQ(m0, 14377898);
    m0 -= zero; EXPECT_EQ(m0, 14377898);
    m0 -= -zero; EXPECT_EQ(m0, 14377898);
    m0 -= +zero; EXPECT_EQ(m0, 14377898);

    Aeu128 m1 = 42824647;
    EXPECT_EQ(m1 - 0, 42824647);
    EXPECT_EQ(m1 + 0, 42824647);
    EXPECT_EQ(m1 + zero, 42824647);
    EXPECT_EQ(m1 - zero, 42824647);
    EXPECT_EQ(m1 + +zero, 42824647);
    EXPECT_EQ(m1 - +zero, 42824647);
    m1 -= 0; EXPECT_EQ(m1, 42824647);
    m1 -= zero; EXPECT_EQ(m1, 42824647);
    m1 -= +zero; EXPECT_EQ(m1, 42824647);
}

TEST(Unsigned_Subtraction, Huge) {
    {
        Aeu512 l = "140200725472120320408987308007401852046751985708836461918643532968362970137811922539267267812900997789094977251743700526385652165472265483662022005.",
                r = "2691628529390915976965332780098772317120244986482788387596801166652813162240424421474148067556838322074992850246237742236416522.";
        EXPECT_EQ(l - r, "140200725472120320406295679478010936069786652928737689601523287981880181750215121372614454650660573367620829184186862204310659315226027741425605483."); //486 bits
    }
    {
        Aeu512 l = "858481153384837729666501071127123006248745356940378822093724973962539666406168436210340307300852054051648733589532203648600965098015527516826025077.",
                r = "1036198480773953484572060071877378705654804716751271387454430604168255461965779842651550165400955727254933737493094085614638692.";
        EXPECT_EQ(l - r, "858481153384837729665464872646349052764173296868501443388070169245788395018714005606172051838886274208997183424131247921346031360522433431211386385."); //489 bits
    }
    {
        Aeu512 l = "849047727332026450783585014441652165164316276295099511056416785949240839164352406493007094556321363776367114240237163744698198334547925439995118645.",
                r = "1133844616051776274045666176047910668348647897321892506799025814253320182961930699320398820155569753300686176445790532769949469.";
        EXPECT_EQ(l - r, "849047727332026450782451169825600388890270610119051600388068138051918946657553380678753774373359433077046715420081593991397512158102134907225169176."); //489 bits
    }
    {
        Aeu512 l = "915223303165607104453959579482739619893620652709947169914443393975008878638507896902267879055947172666771421498591729818113186462466082122911931848.",
                r = "1198296690531742419943421662162719722382218421410971580755881473511834718862159125537041278378262432672343570694760930765253058.";
        EXPECT_EQ(l - r, "915223303165607104452761282792207877473677231047784450192061175553597907057752015428756044337085013541234380220213467385440842891771321192146678790."); //489 bits
    }
    {
        Aeu512 l = "2410519056134567826547514349301690189527424645422912167429183702290356733529750727781157605668693250269498989319263704128158111117311494979582636562.",
                r = "83057601629291866422329759873726127929858845149122266563082978582776171167375048696858238436211720319345324067302464195887542.";
        EXPECT_EQ(l - r, "2410519056134567826547431291700060897661002315663038441301253843445207611263187644802574829497525875220802131080827492407838765793244192515386749020."); //490 bits
    }
    {
        Aeu512 l = "1615073666619794711031454861335197501559249963710818868877087917048961877874696435114905136076227145733006801648364066141016405444828351230193623869.",
                r = "540687419205687962462225440703685891743504719188872345590411169880090264839456226209970484742539408817117519430431133400971791.";
        EXPECT_EQ(l - r, "1615073666619794711030914173915991813596787738270115182985344412329773005529106023945025045811387689506796831163621526732199287925397920096792652078."); //490 bits
    }
    {
        Aeu512 l = "811523223473139683491384380932764631641836545906246323240491888942929662534852617168833620429329684980290428008594085157703461055594771044474633527.",
                r = "1814763807378022530050699101904139747566174315377941463282705648747682993095757688362669873290036863191505379938421321676960957.";
        EXPECT_EQ(l - r, "811523223473139683489569617125386609111785846804342183492925714627551721071569911520085937436233927291927758135304048294511955675656349722797672570."); //489 bits
    }
    {
        Aeu512 l = "875320374471592456420869853000996218671488008460060843125904823902849750649201349766154061372723656188575019473665325474959612988830534854448499262.",
                r = "752177786276963633533480808548694577033866899141698329631697571053181071454713451386788850874049733552657210554729545240533222.";
        EXPECT_EQ(l - r, "875320374471592456420117675214719255037954527651512148548870957003708052319569652195100880301268942737188230622791275741406955778275805309207966040."); //489 bits
    }
    {
        Aeu512 l = "1967862091517062338200130916580040583483579129629106758263830601327351291008358701121303433599335990021880153935091436725773111432206086241856125449.",
                r = "144188383010062071164785642150340551372547722950711811717984393999921817132348161798410525735309502494076148383103942253666027.";
        EXPECT_EQ(l - r, "1967862091517062338199986728197030521412414343986956417712458053604400579196640716727303511782203641860081743409356127223279035283822982299602459422."); //490 bits
    }
    {
        Aeu512 l = "1249549350944517649962129622169936910872166705663891476291901994033378275201222210962045748415641837871304413021508990459987471625482907930316220427.",
                r = "1418436264036250619187883937074088927972876568824922729777743573763760344721544887806790163893519309447669933866267454506940092.";
        EXPECT_EQ(l - r, "1249549350944517649960711185905900660252978821726817387363929117464553352471444467388281988070920292983497622857615471150539801691616640475809280335."); //489 bits
    }
    {
        Aeu512 l = "1336590292050197808739253055026056721222273841235600360771691567041171903077163225067898493778282717090268476279290891689637869290208631180715941598.",
                r = "1662241972836527275365423883449297255679580436766368088304271977639150212085766170673136822787658819039942337050189882732984496.";
        EXPECT_EQ(l - r, "1336590292050197808737590813053220193946908417352151063516011986604405534988858953090259343566196950919595339456503232870597926953158441297982957102."); //489 bits
    }
    {
        Aeu512 l = "1057423282583574989393387486567044490035452285192607245194807581266490653489496547464682001545885015741967155433689219671732920663729056224013569536.",
                r = "858702343293776497987389706786124894520610556284878466228074784695614736014011507586131717743701970449665684401158781077288837.";
        EXPECT_EQ(l - r, "1057423282583574989392528784223750713537464895485821120300286970710205775023268472679986386809871004234381023715945517701283254979327897442936280699."); //489 bits
    }
    {
        Aeu512 l = "845655938395455257822865059759483082588576617968354595463755571890434394005780268330032636253205419665346523442492399454912271351816649284810060674.",
                r = "1772108274273204443458359139171545528526558497863441999591236992571484871496331836302424588080438976849774566668188831721175056.";
        EXPECT_EQ(l - r, "845655938395455257821092951485209878145118258829183049935229013392570952006189031337461151381709087829044098854411960478062496785148460453088885618."); //489 bits
    }
    {
        Aeu512 l = "1415038202023239653249118676964860217795166700513352324261923887582655759738196945594314821663054065973692339928285803250580838775397437851834721429.",
                r = "488930971202119082429311813539891671284706114149703269245436004494793879442280477475402558256865965607777495170911867466864845.";
        EXPECT_EQ(l - r, "1415038202023239653248629745993658098712737388699812432590639181468506056468951509589820027783611785496216937370028937284973061280226525984367856584."); //489 bits
    }
    {
        Aeu512 l = "1997291322916075300630182111054241231444429641296354551335057731597882717811409174534156731504941702670201084092058193279920692478441213333195400479.",
                r = "1188981124292183810048209669497715382493874729606117521729710672707458051981416811675385292500454813095555659671327447441107286.";
        EXPECT_EQ(l - r, "1997291322916075300628993129929949047634381431626856835952563856868276600289679463861449273452960285858525698799557738466825136818769885885754293193."); //490 bits
    }
    {
        Aeu512 l = "1970639682455176735172824588273841107411309169640242869004017519111681105194069945701728271944818618995821858238121023684501367931553058280535646927.",
                r = "300211634689741361467434676133934529820716739694412369380384945710753926216055362145881793375087089823052756728707607210910721.";
        EXPECT_EQ(l - r, "1970639682455176735172524376639151366049841734964108934474196802371986692824689560756017518018602563633675976444745936594678315174824350673324736206."); //490 bits
    }
    {
        Aeu512 l = "735617390694877789422065133762153568914396588058308942960278745032536713412984257120660590728675184293687908618380436067448457239145348438634093308.",
                r = "2621672431556402374217682356188020688571096073919800915342013553799446322504642656268075321813114524386644311025348062094858819.";
        EXPECT_EQ(l - r, "735617390694877789419443461330597166540178905702120922271707648958616912497642243566861144406170541637419833296567321543061812928120000376539234489."); //488 bits
    }
    {
        Aeu512 l = "2934559407408483728954167044285954262477446477436389277769137100826075668605526172357930793858104711663869563769025171034099277090345432529398896823.",
                r = "1276699699896837098982889815167921068700262067234356757628622444945502410190913002520163419379060186232605418764373082131756443.";
        EXPECT_EQ(l - r, "2934559407408483728952890344586057425378463587621221356700436838758841311847897549912985291447913798661349400349646110847866671671581059447267140380."); //490 bits
    }
    {
        Aeu512 l = "2880057060988384138210417561230843384452583068987142026485693983211199779945017599287312510794148995917656328140208538537042075642305575265011955127.",
                r = "66891501381585498802358582816432681320699316612502647044721894024077416275460413181951637948947897280923514269437793508714050.";
        EXPECT_EQ(l - r, "2880057060988384138210350669729461798953780710404325593804373283894587277297972877393288433377873535504474376502259590639761152128036137471503241077."); //490 bits
    }
    {
        Aeu512 l = "2901953795547661430232186571536820103554403626505726873168462825545671375528347271467184042232924308537255905098986540914364402269516838631255695930.",
                r = "2063351487921636583842445551979937639908433421851350341757696232840061160411228247680273260328530175375297268509322584855622977.";
        EXPECT_EQ(l - r, "2901953795547661430230123220048898466970561180953746935528554392123820025186589575234343981072513080289575631838658010738989105001007516046400072953."); //490 bits
    }
    {
        Aeu512 l = "1957602959367770351209461927766742882139029269032669064101708855931401901795503662760114077970475633644154550567180829670964404128165261038347714917.",
                r = "1909474855310493676321586058154665338295475607061002694586208153800751239882558270224862059251357639727246843729995711199222867.";
        EXPECT_EQ(l - r, "1957602959367770351207552452911432388462707682974514398763413380324340899100917454606313326730593075373929688507929472031237157284435265327148492050."); //490 bits
    }
    {
        Aeu512 l = "1540453589947183009624891333522422716797634722253993992084556514219649469732068922173242496181731023891988480925866319155668695978104576177165028075.",
                r = "2339243599508882508246640662699390481716166468285117722922930975466404052860546339893483426895483906847851349621413603841806444.";
        EXPECT_EQ(l - r, "1540453589947183009622552089922913834289388081591294601602840347751364352009145991197776092128870477552094997498970835248820844628483162573323221631."); //489 bits
    }
    {
        Aeu512 l = "110577110629535842461126330776508859507787086977364101851882267561083705673024887826388725453619297803661791778732800373360938999531623174869044957.",
                r = "853976315690216518468053658403259112398398873676787303049703967203182397804099279671614296783087368070564228109239755868135162.";
        EXPECT_EQ(l - r, "110577110629535842460272354460818642989319033318960842739483868687406918369975183859185543055815198523990177481949713005290374771422383419000909795."); //486 bits
    }
    {
        Aeu512 l = "780881739500776212690308697670097331575185918286805517588928886130603079620846527115106947184117016277496631830296473522167807217049068280976765599.",
                r = "8844425990705019065307080858137892648475589566090304109791793020573040752361542700231813116560857720693369009307930169436439.";
        EXPECT_EQ(l - r, "780881739500776212690299853244106626556120611205947379696280410541036989316736735322086374143364654734796400017179912664447113848039760350807329160."); //488 bits
    }
    {
        Aeu512 l = "2521576060640269930222304827392814354310011001930143792783034138958801017722855779110563117564119314035434023994970728339232326575314795501442291454.",
                r = "1970649494348750146640203430765421135149109998529292778950470597493856693457992555699878872774953049329672466674730033368989370.";
        EXPECT_EQ(l - r, "2521576060640269930220334177898465604163370798499378371647885028960271724943905308513069260870661321479734145122195775289902654108640065468073302084."); //490 bits
    }
    {
        Aeu512 l = "3177069934068277821904867272512208726251636848354624770527462914110086552881576400523733328984379868336703637697343906286717813987266776580955354446.",
                r = "533056196414907095718547145424281641993578328730463114736457902448605671823557039310855537666772135998722708684531764294909643.";
        EXPECT_EQ(l - r, "3177069934068277821904334216315793819155918301209200488885469335781356089766839942621284723312556311297392782159677134150719091278582244816660444803."); //490 bits
    }
    {
        Aeu512 l = "2418357346142045588649815799985275469265204087546550256121617753669657656363481040282062188185077698196907748287462904425743268930746084583877227581.",
                r = "2053067461490721766753625910718829319110000481914758307624545496391236586337013767532383905587315847490859633084162259507828220.";
        EXPECT_EQ(l - r, "2418357346142045588647762732523784747498450461635831426802507753187742898055856494785670951598740684429375364381875588578252409297661922324369399361."); //490 bits
    }
    {
        Aeu512 l = "1427085225779590687021918759499741901272944564166064952530661201005429839853477924796075737160979413980825647227376918309758626227829737605170445647.",
                r = "307441020026518843823582581157268712013654556098254577199430098737898396266529317669603415644533663358620999901751413591229033.";
        EXPECT_EQ(l - r, "1427085225779590687021611318479715382429120981584907683818647546449331585276278494697337838764712884663156043811732384646400005227927986191579216614."); //489 bits
    }
    {
        Aeu512 l = "102332528262092091703009031828632797952570165793433865690669316575812470195591636112843372022637382823399997379575602042295554390407190577691135683.",
                r = "1003530563703448149325888461151988687886904254035564906404894072687031770857807273551364644682942734012892495041025976749305013.";
        EXPECT_EQ(l - r, "102332528262092091702005501264929349803244277332281877002782412321776905289186742040156340251779575549848632734892659308282661895366164600941830670."); //486 bits
    }
    {
        Aeu512 l = "2299980370212072419753969609362555591374895273877482979589817493938570435613030646009886765164085056600201624811264005099797711011116794643479198199.",
                r = "2655705729497349790239899571647131000273589170285968366852554312256355535365924722113152600363088837175248616634006986048833417.";
        EXPECT_EQ(l - r, "2299980370212072419751313903633058241584655374305835848589543904768284467246178091697630409628719131878088472210900916262622462394482787657430364782."); //490 bits
    }
    {
        Aeu512 l = "465573920879974549485691496696522036677937661987335933792008680533856398338925843228547074122961715473179727815865624874826343513194069596859380028.",
                r = "1564275037524073091429305200170524554028296441961572581761122561406379357810826735098013965211435152831401318517760289185692661.";
        EXPECT_EQ(l - r, "465573920879974549484127221658997963586508356787165409237980384091894825757164720667140694765150888738081713850654189721994942194676309307673687367."); //488 bits
    }
    {
        Aeu512 l = "2246652556184585069573773192174735042513263355534050384185816088350321753765076234063322454413753804410838447382136754707342054407502662846474743997.",
                r = "213842870212340080686926671083575647904020098520451933843319928869538212900796168321119256834050487576865847908263990577909952.";
        EXPECT_EQ(l - r, "2246652556184585069573559349304522702432576428862966808537912068251801301831232914134452916200853008242517328125302704219765188559594398855896834045."); //490 bits
    }
    {
        Aeu512 l = "409402936249879638147304487527585997562886534738333619047345495476193982477100912541630940716394672430567947203138685009800264114552617573288139301.",
                r = "2024093699245543517095890421925967256630157251441895558318839922405356240038894359746972310879184983874473507491707513478292195.";
        EXPECT_EQ(l - r, "409402936249879638145280393828340454045790644316407651790715338224752086918782072619225584476355778070820974892259500025925790607060910059809847106."); //488 bits
    }
    {
        Aeu512 l = "2832516026595430207157265489606427795583904113483735968358113195345239058222974753764062396159419829305454057334983073613500370320544486669132616851.",
                r = "2410621214703489073777713255260715262804201585312315865637373623772963842811263025816715434288571615791211519081442255855183972.";
        EXPECT_EQ(l - r, "2832516026595430207154854868391724306510126400228475253095308993759926742357337380140289432316608566279637341900694501997709158801463044413277432879."); //490 bits
    }
    {
        Aeu512 l = "967169654533112482759753163226176724737943513299471042073846221251943143591163699075481177097644347163206765723174919102737438245960841436374253524.",
                r = "864174900745688103301890999178030721065389689151291995666483242317936383030123978027914225353620694168538219026143943202052319.";
        EXPECT_EQ(l - r, "967169654533112482758888988325431036634641622300293011352780831562791851595497215833163240714614223185178851497821298408568900026934697493172201205."); //489 bits
    }
    {
        Aeu512 l = "2156880992785743558546598855757904160011525300561516845341022690611829437525689178730370955493635179797398497562735412604480107165035743760721365755.",
                r = "656326721785336491867507778425650069286656061304446547954980661880144277976127278103960747721290753524130454353291366065187509.";
        EXPECT_EQ(l - r, "2156880992785743558545942529036118823519657792783091195271736034550524990977734198068490811215659052519294536815014121850955976710682452394656178246."); //490 bits
    }
    {
        Aeu512 l = "2034505863234626619083345471654245015943017337319937214096223301586886427479504326872492467299275263853440266760396506891507309178687774663587275144.",
                r = "2344699388960578794739382645441194876947872073339471624059233240259137581567048613001208435611379855818830918309580606650002484.";
        EXPECT_EQ(l - r, "2034505863234626619081000772265284437148277954674496019219275429513546955855445093632233329717708215240439058324785127035688478260378194056937272660."); //490 bits
    }
    {
        Aeu512 l = "713402397245822412223230449295003120974458645982255243962656607853867752464219957548793236697995738368491273571953881589406687231636028920565905164.",
                r = "1606805228311634902706915634654754561914330879733525786265875789706082824476745449336708571693960717771120947894722238536857585.";
        EXPECT_EQ(l - r, "713402397245822412221623644066691486071751730347600489400742276974134226677954081759087153873518992919154565000259920871635566283741306682029047579."); //488 bits
    }
    {
        Aeu512 l = "467376385209446550723383146380577666572512261689256944930866882201769340273540833204264213029428689386115758128526876114657572676123376285884891199.",
                r = "1007313508812592443212178548248090664501401007642190359592597702385198143680555455659547399276905337881706067587994524541783477.";
        EXPECT_EQ(l - r, "467376385209446550722375832871765074129300083141008854266365481194127149913948235501879014885748133930456210729249970776775866608535381761343107722."); //488 bits
    }
    {
        Aeu512 l = "2573813850611313114908029676425491411529760625952733457667661607182056720350004147803325914255440546349457686190057184152154834551378894770510254255.",
                r = "1384566102146239252513624970839004552566267367928176061312713573872550267146015294734972072035926782849897230827003062638925524.";
        EXPECT_EQ(l - r, "2573813850611313114906645110323345172277247000981894453115095339814128544288691434229453363988294531054722714118021257369304937320551891707871328731."); //490 bits
    }
}

TEST(Unsigned_Subtraction, HugeAssignment) {
    {
        Aeu512 l = "3101569138666501948748409470754780623195345022759172992952963445357942278833331402600998844028596528811821356965826301359313444247149618992903140205.",
                r = "651776239760515794211325317893502324622662424145726432791191338130054592476045393972530480630723100857529862940723552737566792.";
        l -= r; EXPECT_EQ(l, "3101569138666501948747757694515020107401133697441279490628340782933796552400540211262868789436120483417848826485195578258455914384208895440165573413."); //490 bits
    }
    {
        Aeu512 l = "2987187038104951627287632934541596644607490473544729039048137168656723969639680843067258697418229272085201154622453050198749475801367462144868791984.",
                r = "304235552309825709406884890725960045682887916612528938323501652437835730960586041053273929183557610761096491664464417062776861.";
        l -= r; EXPECT_EQ(l, "2987187038104951627287328698989286818898083588654003079002454280740111440701357341414820861687268686044147880693269492587988379309702997727806015123."); //490 bits
    }
    {
        Aeu512 l = "2099504068149420925168937833924816340468690131556372320345649935328421179286624110430258498294729346147794811176525297923265442578645924428216983873.",
                r = "1737784985420137977900049711525773281566221717090806811505963756089136165600671365021327917973174379938351712489133858605314109.";
        l -= r; EXPECT_EQ(l, "2099504068149420925167200048939396202490790081844846547064083713611330372475118146674169362129128674782773483258552123543327090866156790569611669764."); //490 bits
    }
    {
        Aeu512 l = "637102999446573221720642697215773378093493559406967356511983560723736619935760865745881703056151861600151491540190175475075271340399706085556589669.",
                r = "762717636943008515968967235448344245693705872543527305897248000375867515554271629573091954017263846446943438729372205930554760.";
        l -= r; EXPECT_EQ(l, "637102999446573221719879979578830369577524592171519012266289854851193092629863617745505835540597589970578399586172911628628327901670333879626034909."); //488 bits
    }
    {
        Aeu512 l = "2991105969818982854622610153445882288601919582008571124937241797181480469457725748752410648264536659627597645461782702862086193574160069175642045562.",
                r = "2125739250884216843663020311756288957337711927071893650226741336878608020641030546112267931127894235645171950551290885556742853.";
        l -= r; EXPECT_EQ(l, "2991105969818982854620484414194998071758256561696814835979904085254408575807499007415532040243895629081485377530654808626441021623608778290085302709."); //490 bits
    }
    {
        Aeu512 l = "272025987113289377287052328991908457797313403847631023098829984271875887989364532374362818120899640630603472429935571133273481157702905777839616989.",
                r = "301083994044303818197242972293754531252518250606670560036253527411036798296780746741767021745595793518977198768028092001320375.";
        l -= r; EXPECT_EQ(l, "272025987113289377286751244997864153979116160875337268567577466021269217429328278846951781322602859883861705408189975339754503958934877685838296614."); //487 bits
    }
    {
        Aeu512 l = "1164044597578739024526133415810663457806294279205651705717159970992776184762136938604392725594780655833750836943488259546247140132774783205428084644.",
                r = "2100366073652965431803474912367259450814389525717894410892203736044654037685604600766167535438691201308223021574142433224513449.";
        l -= r; EXPECT_EQ(l, "1164044597578739024524033049737010492374490804293284446266345581467058290351244734868348071557095051232984669408049568344938917111200640772203571195."); //489 bits
    }
    {
        Aeu512 l = "1077067254719947871245733431912973079128588445771936150751467803519088967919277994671498513138611033370212456568435691257732313119908635327374082252.",
                r = "566518887518694009261227277682962935414659834392964920534524308573157288224999248984144721615142386218344930084762910222590559.";
        l -= r; EXPECT_EQ(l, "1077067254719947871245166913025454385119327218494253187816053143684696002998743470362925355850386034121228311846820548871513968189823872417151491693."); //489 bits
    }
    {
        Aeu512 l = "778196734016048900907329133827085529522066591153216654966055015515651466688237423362777259508528056229488387277040219550986005446529797318027859786.",
                r = "61788297513538020428474131781958044388416394147831758462245233653199716288893946308271879906034770553052601313048095212013343.";
        l -= r; EXPECT_EQ(l, "778196734016048900907267345529571991501638117021434696921666599121503634929775178129124059792239162283180115397134184780432952845216749222815846443."); //488 bits
    }
    {
        Aeu512 l = "1898583206533586223758205270738560309123068410070913175325331161680088986628377629967275486453002711409447471007561640041470320116757111199268939643.",
                r = "2163612143559205928380831692474607047565432057278441679416219844256826920706694390537480679461752567846659158531045969802353219.";
        l -= r; EXPECT_EQ(l, "1898583206533586223756041658595001103194687578378438568277765729622810544948961410123018659532296017018909990328099887473623660958226065229466586424."); //490 bits
    }
    {
        Aeu512 l = "1317999132776739140721746070898425076657512709133586404226586492690800242586221661216267289871931342479024710421711014863840045688961506408759954165.",
                r = "2098221021920629327017282882482524025213962425327159221276957874336742903067941233908004980551727579200238717596006810917633558.";
        l -= r; EXPECT_EQ(l, "1317999132776739140719647849876504447330495426251103880201372530265473083364944703341930546968863401245116705441159287284639806971365499597842320607."); //489 bits
    }
    {
        Aeu512 l = "1598811381180424220859713827278534103494344263934080774672335564536038636847159625904691263345647127519681369459009646910568165756249715619255932269.",
                r = "1052915723913539553496627168597705387649341984691563331335012905728407548818671585221183287721734225755573661131434136831476272.";
        l -= r; EXPECT_EQ(l, "1598811381180424220858660911554620563940847636765483069284686222551347073515824612998962855796828455934460186171287912684812592095118281482424455997."); //490 bits
    }
    {
        Aeu512 l = "2739721899331841606817994980430485133265533659988533635799352273855446777626606327534330482423210306194682784773802490811495152640597945131665518871.",
                r = "1086444743619125397293241115527304948877204713022838128980759738039166940635558553134770389244211815991591303393899688522865976.";
        l -= r; EXPECT_EQ(l, "2739721899331841606816908535686866007868240418873006330850475069142423939497625567796291315482574747641548014384558278995503561337204045443142652895."); //490 bits
    }
    {
        Aeu512 l = "428261952290985744662803611648148639474188475946008528741019543791098562883087555332563787729224011663473897885490662629605103048170440601843996250.",
                r = "1413801118789893684796171450803236499824405472921742185905568904002974881677079973162382845091205879035593966244598441711382682.";
        l -= r; EXPECT_EQ(l, "428261952290985744661389810529358745789392304495205292241195138318176820697181986428560812847546931690311515040399456750569509081925842160132613568."); //488 bits
    }
    {
        Aeu512 l = "1522708381489370739396988616768127889961966504332707307174016616138292290663989883362491634611648278833154315400655927473740732526667452104500326778.",
                r = "2322669183350110245248946410115742360880935656646390630172698989876208474320587326456255118458124488640778205689176738002275084.";
        l -= r; EXPECT_EQ(l, "1522708381489370739394665947584777779716717557922591564813135680481645900033817184372615426137327691506698060282197802985099954320978275366498051694."); //489 bits
    }
    {
        Aeu512 l = "1438128902748652097363376384315769758600261294148651888559280759941994589624508997619041441338655390939134314171479316046013978880370051134327791391.",
                r = "2659439884151629367876779012665214640049680758021146205546330994128956421966014561834236776480221566373700150216251167807025864.";
        l -= r; EXPECT_EQ(l, "1438128902748652097360716944431618129232384515135986673919231079183973443418962666624912484916689376377300077394999094479640278730153799966520765527."); //489 bits
    }
    {
        Aeu512 l = "2074712530145725806507128554238539212025842294185058614951496829345594985749188974538701297498449212453558084490578554163007127531643581444345285394.",
                r = "63968432416706332978301536882293831901661963171166066804686703626776547477608373340805655060007030625829790376595884195054998.";
        l -= r; EXPECT_EQ(l, "2074712530145725806507064585806122505692863992648176321119595167382423819682384287835074520950971604080217278835518547132381297741266985560150230396."); //490 bits
    }
    {
        Aeu512 l = "2982003559541292158488912868296290115629740594631237944342742555665283270811289974144971334050085337036052596154675541639517796910926784652486736114.",
                r = "1775473310572540508368889252603617487384824186612078698207956544368790477037020353764032946258776985406768833314278022168384374.";
        l -= r; EXPECT_EQ(l, "2982003559541292158487137394985717575121371705378634326855357731478671192113082017600602543573048316682288563208416764654111028077612506630318351740."); //490 bits
    }
    {
        Aeu512 l = "3081986406125677799738280371270235439299160781454504981208991866675530810180291539421336677607838294073051741602482304644254913901238198181862021237.",
                r = "137633264488090805716020321415947873311240749861384495174345177376290863838407487167965318843695345787694730663972807341454439.";
        l -= r; EXPECT_EQ(l, "3081986406125677799738142738005747348493444761133089033335680625925669425685117194243960386743999886585883776283638609298467219170574225374520566798."); //490 bits
    }
    {
        Aeu512 l = "2249909164850050233748683665895956651351896073258991945902225586545687924602968762183900079076197741000254116192069713428125570154269639922218800849.",
                r = "653553611163618905881685126112127840484844150786416331358349429525473268814242244537790695963169661990989330907876212406607723.";
        l -= r; EXPECT_EQ(l, "2249909164850050233748030112284793032446014388132879818061740742394901508271610412754374605807383498755716325496106543766134580823361763709812193126."); //490 bits
    }
    {
        Aeu512 l = "3074250363540898707981801258722870576398542824884295294242082452269084940175481248882313848669371494347710044097499204765294951421438436489548017507.",
                r = "2322516219682114161848957706345005338046833600558741755382423716788963916553421232267127317385962515412254784129415727919122438.";
        l -= r; EXPECT_EQ(l, "3074250363540898707979478742503188462236693867177950288904035618668526198420098825165524884752818073115442916780113242249882696637309020761628895069."); //490 bits
    }
    {
        Aeu512 l = "2663301838497118772578810818517853091605270991775384523345000465276249630056782612027196457062004375613529292925181234447475502169989089176437909285.",
                r = "1882939433318232594794016024126267341257819255763015291997779105755397947158898405858514215496054312720004618016439614582044192.";
        l -= r; EXPECT_EQ(l, "2663301838497118772576927879084534859010476975751258256003742646020486614764784832921441059114845477207670778709685180134755497551972649561855865093."); //490 bits
    }
    {
        Aeu512 l = "528039684547606028910218573525741214129005011635653929473687093509444335141570093993027485421861365369187898418773273198162331604279410494136133810.",
                r = "1072228842302517785309771270083022727358486032871474555607816952037903642344949344152959081578430601839236804789263271963155540.";
        l -= r; EXPECT_EQ(l, "528039684547606028909146344683438696343695240365570906746328607476572860585962277040989581779516416025034939337194842596323094799490147222172978270."); //488 bits
    }
    {
        Aeu512 l = "1670122620043576784561680947173514719439728706433289349955999060007301027172589129215098261722468585986686863393407387637836128501227773932598038729.",
                r = "1290966716095317332795766204739439446421891640632337553557570227848845352522622379048130592108494798559019157225942903758836702.";
        l -= r; EXPECT_EQ(l, "1670122620043576784560389980457419402106932940228549910509577168366668689619031558987249416369945963607638732801298892839277109344001831028839202027."); //490 bits
    }
    {
        Aeu512 l = "152731822141471569759549771725076056236206904429674581942876790492855933093286255551838182435722896009717940848061784782139148640059893486413749396.",
                r = "1989535522032736462368891659437660829578670792271419557261815717958660469252836996637353705994316312718429978852761992888327783.";
        l -= r; EXPECT_EQ(l, "152731822141471569757560236203043319773838012770236921113298119700584513536024439833879521966470059013080587142067468469420718661207131493525421613."); //486 bits
    }
    {
        Aeu512 l = "179089417472590733231446492313445472960108962237121392349424016165588383552050160269640559297859663049009185392912408048841871887202775490266279342.",
                r = "1026511691243297747693356464133107148166345988662850653416211221830240820419660696130732797144736095709040736004456327725492087.";
        l -= r; EXPECT_EQ(l, "179089417472590733230419980622202175212415605772988285201257670176925532898633949047810318477440002352878452595767671953132831151198319162540787255."); //486 bits
    }
    {
        Aeu512 l = "2858790125592590387055130813626220134963112933317612707587369386551877040482174945966435507503069892854808654577275245615175506234456890881843005926.",
                r = "2226422656629074412105025756807889188636918566398292326287444042354999786288320546275412849728494111563526288096758798867818890.";
        l -= r; EXPECT_EQ(l, "2858790125592590387052904390969591060551007907560804818398732467985478748155887501924080507716781572308533241727546751503611979946360132082975187036."); //490 bits
    }
    {
        Aeu512 l = "1810012809758276443496895011143079596760683990522821669321118740955660240227017245809786300434671008037772912000272563133432843547770872049497817423.",
                r = "2188691148941315723687697948365887991418948564909408505522092459716570762758736397998221367604946853920281527320951574012072616.";
        l -= r; EXPECT_EQ(l, "1810012809758276443494706319994138281036996292574455781329699792390750831721495153350069729671912271639774690632667616279512562020449920475485744807."); //490 bits
    }
    {
        Aeu512 l = "3122187336470567198012444276858789208252011848812280619242348420605602871809586300281969693018644578851446819919567828876463242317437620763877260169.",
                r = "2054941439563781178834883786544262706513447064847320509998566561576929352155811727431539103654646916606932120823664585561324835.";
        l -= r; EXPECT_EQ(l, "3122187336470567198010389335419225427073176965025736356535834973540755551299587733720392763666488767124015280815913181959856310196613956178315935334."); //490 bits
    }
    {
        Aeu512 l = "2849556785569628429908918463529852195792263964078952458344196684464674591756931330798118681713451825785083860955197378763543986418087554741020504027.",
                r = "236016480345252269921678291322772459919638715180235186268875493177337123973272441511392010077960595791809409949838092002334895.";
        l -= r; EXPECT_EQ(l, "2849556785569628429908682447049506943522342285787629685884277045749494356570662455304941344589478553343572468945119418167752177008137716649018169132."); //490 bits
    }
    {
        Aeu512 l = "2670254946104331232628246353148491868490597607484530176532043157480543027624301411586357297554421913710747473167164307981498490493890455614772478056.",
                r = "2066199971500606555608187024576879954612139170467945026853626800658985721958546369110006437759364605003047985535636310391383064.";
        l -= r; EXPECT_EQ(l, "2670254946104331232626180153176991261934989420459953296577431018310075082597447784785698311832463367341637466729404943376495442508354819304381094992."); //490 bits
    }
    {
        Aeu512 l = "3176407742710499398291226032329623463081543199252260535042539368176161710023751216996193901484205547371363662486373643439742963655705422749713624862.",
                r = "639423087030740418884560296199868791759500699301079574724367969136458431405815125356683539420954392727996838578919353971244345.";
        l -= r; EXPECT_EQ(l, "3176407742710499398290586609242592722662658638956060666250779867476860630449026849027057443052799732246006978946952689047014966817126503395742380517."); //490 bits
    }
    {
        Aeu512 l = "2084609811726790975917383240869323127896396464697925172681528981102879562720356173544209369840655087284454520304702520268239416032489922041018452269.",
                r = "673477276072009674452525186353080194982872597128377006986214425378881396453648194193798174271449751836301099448795989464912814.";
        l -= r; EXPECT_EQ(l, "2084609811726790975916709763593251118221943939511572092486546108505751185713369959118830488444201439090260722130431070516403114933041126051553539455."); //490 bits
    }
    {
        Aeu512 l = "22933541251372501701088217509399125703310548704255854237069231853936520300805969647501641431898286585829331543579396117413600959849195929976903285.",
                r = "668818269231063686036978169908982989652414549354006087576932658808297837193784382182603473624679111484890567357591890080790587.";
        l -= r; EXPECT_EQ(l, "22933541251372501700419399240168062017273570534346871247416817304582514213229036988693343594704502203646728069954717005928710392491604039896112698."); //483 bits
    }
    {
        Aeu512 l = "605300976240940132046610226805329819089083705884774311499101597078909037695679481313272057419387982629612099444239830137649701897113170765430597467.",
                r = "1637368320256942815593260137253459292117732685018885751606063380098124866117340752745540574278146727075943077329882206861790686.";
        l -= r; EXPECT_EQ(l, "605300976240940132044972858485072876273490445747520852206983864393890151944073417933173932553270641876866558869961683410573758819783288558568806781."); //488 bits
    }
    {
        Aeu512 l = "771662487857395896211238653730708630227829215215460773874535766344819321804015601155453502219216717187215027364831315411251709094098441659977624693.",
                r = "1840967279884653379017732803484575204214026398846719338476489696460294519462191932279605637572821530887549626545534084026045193.";
        l -= r; EXPECT_EQ(l, "771662487857395896209397686450823976848811482411976198670321739945972602465539111458993207699754525254935421727258493880364159467552907575951579500."); //488 bits
    }
    {
        Aeu512 l = "2638089107488619115278596592030156434603101353537805518994945933150860204985279616986061239746323528589246878610126339890031916934641261133327635463.",
                r = "646507313517004888842369709981956139658804024990886230048009983279246889267918230871053552037376074769325949236906774810777636.";
        l -= r; EXPECT_EQ(l, "2638089107488619115277950084716639429714258983827823562855287129125869318755231607002781992857055610358375825058088963815262590985404354358516857827."); //490 bits
    }
    {
        Aeu512 l = "972091626356395415725695335718931531479835430336988223160877338748964987496122387735600046058101584535485153974828767725682360756710697996712269564.",
                r = "251281021191983950728772076273951314067928350255692191731728633556358053927569006713102875331871228399161401364980949148918183.";
        l -= r; EXPECT_EQ(l, "972091626356395415725444054697739547529106658260714271846809410398709295304390659102043688004174015528772051099496896497283199355345717047563351381."); //489 bits
    }
    {
        Aeu512 l = "2925388603912876089646885044098495729073496977120759779684808885512447844573608471405279973000374564850851810310012415319978191703863730744147429570.",
                r = "1436650759050643997186315983723022487446009582984004211007253399798065214015097165821237646270984214592499055145080065524341968.";
        l -= r; EXPECT_EQ(l, "2925388603912876089645448393339445085076310661137036757197362875929463840362601218005481907786359467685030572663741431105385692648718650678623087602."); //490 bits
    }
    {
        Aeu512 l = "705422064829241053041172260530625068796083348025543079285211669484443720017971403386569072164423687175229471542582089630998916093468469517686820866.",
                r = "715669827435922326294810567498261597412165529117335879945637132847503946262199495135661990282533443293153578342600644595778791.";
        l -= r; EXPECT_EQ(l, "705422064829241053040456590703189146469788537458044817687799503955326384138025766253721568218161487680093809552299556187705762515125868873091042075."); //488 bits
    }
}

TEST(Unsigned_Subtraction, Decrement) {
    Aeu128 m1 = 28310193;
    --m1; --m1; --m1; m1--; --m1; m1--; --m1; m1--; --m1; --m1; --m1;
    EXPECT_EQ(m1, 28310182);
    Aeu128 t1 = m1--, u1 = --m1;
    EXPECT_EQ(t1, 28310182); EXPECT_EQ(u1, 28310180); EXPECT_EQ(m1, 28310180);

    Aeu128 m2 = 57075809;
    --m2; m2--; m2--; m2--; m2--; --m2; --m2; --m2; --m2;
    EXPECT_EQ(m2, 57075800);
    Aeu128 t2 = m2--, u2 = --m2;
    EXPECT_EQ(t2, 57075800); EXPECT_EQ(u2, 57075798); EXPECT_EQ(m2, 57075798);
}