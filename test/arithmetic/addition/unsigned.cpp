#include <gtest/gtest.h>
#include "../../../Aeu.h"

TEST(Unsigned_Addition, Basic) {
    {
        Aeu128 zero = 0u, m0 = 26359343u;
        EXPECT_EQ(zero + m0, 26359343u);
        EXPECT_EQ(m0 + zero, 26359343u);
        EXPECT_EQ(zero + +m0, 26359343u);
        EXPECT_EQ(m0 + +zero, 26359343u);
        EXPECT_EQ(+zero + m0, 26359343u);
        EXPECT_EQ(+m0 + zero, 26359343u);
        EXPECT_EQ(+zero + +m0, 26359343u);
        EXPECT_EQ(+m0 + +zero, 26359343u);
        m0 += zero; EXPECT_EQ(m0, 26359343u); m0 += +zero; EXPECT_EQ(m0, 26359343u); +m0 += zero; EXPECT_EQ(m0, 26359343u); +m0 += +zero; EXPECT_EQ(m0, 26359343u);
    }
    {
        Aeu128 zero = 0u, m1 = 14670384u, m2 = 55908622u;
        EXPECT_EQ(m1 + 0u, 14670384u); EXPECT_EQ(0u + m1, 14670384u); EXPECT_EQ(m1 + zero, 14670384u); EXPECT_EQ(m1 + +zero, 14670384u);
        EXPECT_EQ(m1 + +zero, 14670384u); EXPECT_EQ(zero + m1, 14670384u); EXPECT_EQ(+zero + m1, 14670384u); m1 += 0u; EXPECT_EQ(m1, 14670384u);
        m1 += zero; EXPECT_EQ(m1, 14670384u); m1 += +zero; EXPECT_EQ(m1, 14670384u);

        EXPECT_EQ(m2 + 0u, 55908622u); EXPECT_EQ(0u + m2, 55908622u); EXPECT_EQ(m2 + zero, 55908622u); EXPECT_EQ(m2 + +zero, 55908622u);
        EXPECT_EQ(m2 + +zero, 55908622u); EXPECT_EQ(zero + m2, 55908622u); EXPECT_EQ(+zero + m2, 55908622u); m2 += 0u; EXPECT_EQ(m2, 55908622u);
        m2 += zero; EXPECT_EQ(m2, 55908622u); m2 += +zero; EXPECT_EQ(m2, 55908622u);
    }
    {
        Aeu128 s1 = 0x24DFBE889u, s2 = 0x193E161Cu, s3 = 0x51CDFC6u, s4 = 0x1706808355u;
        EXPECT_EQ(s1 + s1, 0x49BF7D112u);
        EXPECT_EQ(s1 + s2, 0x26739fea5u);
        EXPECT_EQ(s1 + s3, 0x25318c84fu);
        EXPECT_EQ(s1 + s4, 0x19547c6bdeu);
        EXPECT_EQ(s2 + s1, 0x26739fea5u);
        EXPECT_EQ(s2 + s2, 0x327c2c38u);
        EXPECT_EQ(s2 + s3, 0x1e5af5e2u);
        EXPECT_EQ(s2 + s4, 0x171fbe9971u);
        EXPECT_EQ(s3 + s1, 0x25318c84fu);
        EXPECT_EQ(s3 + s2, 0x1e5af5e2u);
        EXPECT_EQ(s3 + s3, 0xa39bf8cu);
        EXPECT_EQ(s3 + s4, 0x170b9d631bu);
        EXPECT_EQ(s4 + s1, 0x19547c6bdeu);
        EXPECT_EQ(s4 + s2, 0x171fbe9971u);
        EXPECT_EQ(s4 + s3, 0x170b9d631bu);
        EXPECT_EQ(s4 + s4, 0x2e0d0106aau);
    }
}

TEST(Unsigned_Addition, Huge) {
    {
        Aeu512 l = "2326333277280079839475608346577929682764367222989747129677338493683526466858744456372666943713731781165063938406187762357596980704175585567928997948.",
                r = "2347185060395110497228274602933431846575460587905408209843081337301055068653709470534007082503369374603958788874525927790259452449305937699479895621.";
        EXPECT_EQ(l + r, "4673518337675190336703882949511361529339827810895155339520419830984581535512453926906674026217101155769022727280713690147856433153481523267408893569."); //491 bits
    }
}

TEST(Unsigned_Addition, HugeAssignment) {
    {
        Aeu512 l = "157398389073863840544417511339818273758723060248753121479191002097450222704310077442881094234123139987464824792910688568012737816097137929407927199.",
                r = "339236136114602883445460178280566088250454247752207806981592701628313330682609000687580799034495264485601116317383081025729148676917836219827284915.";
        l += r; EXPECT_EQ(l, "496634525188466723989877689620384362009177308000960928460783703725763553386919078130461893268618404473065941110293769593741886493014974149235212114."); //488 bits
    }
}

TEST(Unsigned_Addition, Increment) {
    Aeu512 m0 = 62492992u;
    ++m0; ++m0; m0++; ++m0; m0++; ++m0; m0++; ++m0; m0++; ++m0;
    EXPECT_EQ(m0, 62493002u);
    Aeu512 t0 = m0++, u0 = ++m0;
    EXPECT_EQ(t0, 62493002u); EXPECT_EQ(u0, 62493004u); EXPECT_EQ(m0, 62493004u);

    Aeu512 m2 = 77428594u;
    m2++; m2++; ++m2; m2++; m2++; m2++; ++m2; m2++; m2++; m2++; ++m2; m2++; ++m2; ++m2;
    EXPECT_EQ(m2, 77428608u);
    Aeu512 t2 = m2++, u2 = ++m2;
    EXPECT_EQ(t2, 77428608u); EXPECT_EQ(u2, 77428610u); EXPECT_EQ(m2, 77428610u);

    Aeu512 m3 = 77677795u;
    ++m3; ++m3; ++m3; m3++; ++m3; m3++; ++m3; ++m3; m3++; ++m3; m3++; ++m3; m3++; m3++; m3++; m3++; m3++; ++m3;
    EXPECT_EQ(m3, 77677813u);
    Aeu512 t3 = m3++, u3 = ++m3;
    EXPECT_EQ(t3, 77677813u); EXPECT_EQ(u3, 77677815u); EXPECT_EQ(m3, 77677815u);
}
